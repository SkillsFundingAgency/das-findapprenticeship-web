@using SFA.DAS.FAA.Web.Infrastructure
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model SFA.DAS.FAA.Web.Models.SearchResults.SearchApprenticeshipsViewModel
@{
    ViewData["Title"] = "Search for an apprenticeship – Find an apprenticeship – GOV.UK";
}
<div class="page--faa-homepage">
    @if (Model.ShowAccountCreatedBanner)
    {
        <partial name="_AccountCreatedBanner" />
    }
    @if (Model.ShowAccountFoundBanner)
    {
        <partial name="_AccountFoundBanner" />
    }
    @if (Model.ShowAccountDeletedBanner)
    {
        <partial name="_AccountDeletedBanner" />
    }
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            @if (!ViewData.ModelState.IsValid)
            {
                <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
                    <h2 class="govuk-error-summary__title" id="error-summary-title">
                        There is a problem
                    </h2>
                    <div class="govuk-error-summary__body">
                        <ul class="govuk-list govuk-error-summary__list">
                            <li>
                                <a href="#@nameof(Model.WhereSearchTerm)">
                                    <span class="govuk-visually-hidden">Error: </span>@ViewData.ModelState[nameof(Model.WhereSearchTerm)]?.Errors.FirstOrDefault()?.ErrorMessage
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            }
            <h1 class="govuk-heading-xl govuk-!-margin-bottom-3 faa-page-heading">Search apprenticeships</h1>
            <p class="govuk-hint govuk-!-font-size-24">@Model.TotalText</p>
        </div>
    </div>
    <div class="faa-home-panel">
        <form class="form" method="get">
            <input type="hidden" name="search" value="1" />
            <div class="govuk-grid-row">

                <div class="govuk-grid-column-one-half govuk-grid-column-one-third-from-desktop">
                    <div
                        class="govuk-form-group @((ViewData.ModelState[nameof(Model.WhatSearchTerm)]?.ValidationState == Microsoft.AspNetCore.Mvc.ModelBinding.ModelValidationState.Invalid) ? "govuk-form-group--error" : "")">

                        <label class="govuk-label govuk-label--m" for="WhatSearchTerm">
                            What
                        </label>
                        <span asp-validation-for="WhatSearchTerm" class="govuk-error-message"></span>
                        <div id="what-hint" class="govuk-hint">
                            Enter a job or company
                        </div>
                        <input asp-for="WhatSearchTerm" type="text" aria-describedby="what-hint" class="govuk-input"
                            id="WhatSearchTerm" autocomplete="off" />
                    </div>
                </div>
                <div class="govuk-grid-column-one-half govuk-grid-column-one-third-from-desktop">
                    <div
                        class="govuk-form-group @((ViewData.ModelState[nameof(Model.WhereSearchTerm)]?.ValidationState == Microsoft.AspNetCore.Mvc.ModelBinding.ModelValidationState.Invalid) ? "govuk-form-group--error" : "")">

                        <label class="govuk-label govuk-label--m" for="WhereSearchTerm">
                            Where
                        </label>
                        <span asp-validation-for="WhereSearchTerm" class="govuk-error-message"></span>
                        <div id="where-hint" class="govuk-hint">
                            Enter a city or postcode
                        </div>
                        <input asp-for="WhereSearchTerm" type="text" type="search" spellcheck="false"
                            autocomplete="postal-code" aria-describedby="where-hint"
                            class="govuk-input faa-location-autocomplete" id="WhereSearchTerm" />
                    </div>
                </div>
            </div>
            <div class="govuk-button-group govuk-!-margin-bottom-0">
                <button class="govuk-button" data-module="govuk-button">Search</button>
                <a asp-route="@RouteNames.BrowseByInterests" class="govuk-link govuk-link--no-visited-state">Browse by
                    your interests instead</a>
            </div>
        </form>
    </div>
</div>