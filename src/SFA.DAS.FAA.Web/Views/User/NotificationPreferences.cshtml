@using SFA.DAS.FAA.Web.Infrastructure
@model SFA.DAS.FAA.Web.Models.User.NotificationPreferencesViewModel
@{
    ViewBag.Title = "Tell us your notification preferences – Find an apprenticeship – GOV.UK";
}
@section BackLink {
    @if (Model.ReturnToConfirmationPage is true)
    {
        <a class="govuk-back-link" asp-route="@RouteNames.ConfirmAccountDetails">Back</a>
    }
    else
    {
        <a class="govuk-back-link" asp-route="@RouteNames.PhoneNumber" asp-route-backLink="@Model.PhoneNumberBacklink">
            Back
        </a>
    }
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <partial name="_ValidationSummary" />
        <span class="govuk-caption-l">Create an account</span>
        <h1 class="govuk-heading-l">Tell us your notification preferences</h1>

        <form class="form" method="post">
            <input type="hidden" asp-for="@Model.ReturnToConfirmationPage" />
            @for (var i = 0; i < Model.NotificationPreferences.Count; i++)
            {
                <input type="hidden" asp-for="@Model.NotificationPreferences[i].PreferenceId" />
                <input type="hidden" asp-for="@Model.NotificationPreferences[i].Meaning" />
                <input type="hidden" asp-for="@Model.NotificationPreferences[i].Hint" />

                <div class="govuk-form-group">
                    <fieldset class="govuk-fieldset">
                        <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
                            <h1 class="govuk-fieldset__heading">
                                @Model.NotificationPreferences[i].Meaning
                            </h1>
                        </legend>
                        <div id="notification-hint" class="govuk-hint">
                            @Model.NotificationPreferences[i].Hint
                        </div>
                        <div class="govuk-checkboxes" data-module="govuk-checkboxes">
                            <div class="govuk-checkboxes__item">
                                <input class="govuk-checkboxes__input" asp-for="@Model.NotificationPreferences[i].TextPreference" type="checkbox">
                                <label class="govuk-label govuk-checkboxes__label" asp-for="@Model.NotificationPreferences[i].TextPreference">
                                    Text
                                </label>
                            </div>
                            <div class="govuk-checkboxes__item">
                                <input class="govuk-checkboxes__input" asp-for="@Model.NotificationPreferences[i].EmailPreference" type="checkbox">
                                <label class="govuk-label govuk-checkboxes__label" asp-for="@Model.NotificationPreferences[i].EmailPreference">
                                    Email
                                </label>
                            </div>
                        </div>
                    </fieldset>
                </div>
            }

            <div class="govuk-button-group">
                <button class="govuk-button" data-module="govuk-button">
                    Continue
                </button>
                <a class="govuk-link" asp-route="@RouteNames.NotificationPreferencesSkip">Skip - don't get notifications</a>
            </div>
        </form>
    </div>
</div>